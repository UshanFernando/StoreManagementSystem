<?xml version="1.0" encoding="UTF-8"?>


<Queries>

    <!-- ==================== queries for product management====================== -->

    <!-- Create products table  -->
    <query id="create_product_table">
        <![CDATA[
CREATE TABLE `products` (
  `pid` int(11) NOT NULL,
  `name` varchar(45) DEFAULT NULL,
  `price` double DEFAULT NULL,
  `brand` int(11) DEFAULT NULL,
  `category` int(11) DEFAULT NULL,
  `qty` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`pid`),
  KEY `brand_idx` (`brand`),
  KEY `cate_fkey_idx` (`category`),
  CONSTRAINT `brand_fkey` FOREIGN KEY (`brand`) REFERENCES `brands` (`bid`),
  CONSTRAINT `cate_fkey` FOREIGN KEY (`category`) REFERENCES `categories` (`cid`)
);


        ]]>
    </query>

    <!-- Select products -->
    <query id="get_products">
        <![CDATA[
           SELECT * FROM products
        ]]>
    </query>

    <!-- Add product -->
    <query id="add_product">
        <![CDATA[
          INSERT INTO products VALUES (?, ?, ? , ? , ? , ?);
        ]]>
    </query>

    <!-- Select a particular user by id Query -->
    <query id="product_by_id">
        <![CDATA[
            select * from products where pid = ?
        ]]>
    </query>

    <!-- Update a particular product by id Query -->
    <query id="update_product">
        <![CDATA[
            update products as p
            set p.pid = ?, p.name = ?,  p.price = ?, p.brand = ?,p.category = ? ,p.qty = ?
            where p.pid = ?
        ]]>
    </query>

    <!-- delete a particular product by id Query -->
    <query id="delete_product">
        <![CDATA[
            DELETE FROM products WHERE pid = ? LIMIT 1
        ]]>
    </query>

    <!-- ==================== queries for brand management====================== -->

    <!-- Create brands table  -->
    <query id="create_brands_table">
        <![CDATA[
        CREATE TABLE `brands` (
  `bid` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`bid`)
);


        ]]>
    </query>

    <!-- Select brands -->
    <query id="get_brands">
        <![CDATA[
            select * from brands
        ]]>
    </query>

    <!-- Add brand -->
    <query id="add_brand">
        <![CDATA[
          INSERT INTO BRANDS(name,status) VALUES (?, ?);
        ]]>
    </query>

    <query id="delete_brand">
        <![CDATA[
            DELETE FROM brands WHERE bid = ? LIMIT 1
        ]]>
    </query>

    <!-- Select a particular brand by id Query -->
    <query id="brand_by_id">
        <![CDATA[
            select * from brands where bid = ?
        ]]>
    </query>

    <!-- Update a particular brand by id Query -->
    <query id="update_brand">
        <![CDATA[
            update brands as b
            set b.bid = ?, b.name = ?,  b.status = ?
            where b.bid = ?
        ]]>
    </query>

    <!-- ==================== queries for Category management ====================== -->

    <!-- Create categories table  -->
    <query id="create_categories_table">
        <![CDATA[
         CREATE TABLE `categories` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`cid`)
    );

   ]]>
    </query>

    <!-- Select categories -->
    <query id="get_categories">
        <![CDATA[
            select * from categories
        ]]>
    </query>

    <!-- Add Category -->
    <query id="add_category">
        <![CDATA[
          INSERT INTO categories(name,status) VALUES (?, ?);
        ]]>
    </query>

    <!-- Select a particular category by id Query -->
    <query id="category_by_id">
        <![CDATA[
            select * from categories where cid = ?
        ]]>
    </query>

    <!-- Update a particular category by id Query -->
    <query id="update_category">
        <![CDATA[
            update categories as c
            set c.cid = ?, c.name = ?,  c.status = ?
            where c.cid = ?
        ]]>
    </query>

    <query id="delete_category">
        <![CDATA[
            DELETE FROM categories WHERE cid = ? LIMIT 1
        ]]>
    </query>

    <!-- Create table Sales Query -->
    <query id="create_sales">
        <![CDATA[

        ]]>
    </query>

    <!-- ==================== queries for supplier management====================== -->

    <!-- Create supplier table  -->
    <query id="create_supplier_table">
        <![CDATA[
        CREATE TABLE `supplier` (
        `sid` int(11) NOT NULL,
        `name` varchar(255) NOT NULL,
        `category` int(11) NOT NULL,
        `address` varchar(255) NOT NULL,
        PRIMARY KEY (`sid`),
        KEY `suppliercate_idx` (`category`),
        CONSTRAINT `supplier_cate_fkey` FOREIGN KEY (`category`) REFERENCES `categories` (`cid`)

        );
       ]]>
    </query>

    <!-- Create supplier contact  -->
    <query id="create_supplier_contact_table">
        <![CDATA[
        CREATE TABLE `supplier_contact` (
        `sid` int(11) NOT NULL,
        `phone` varchar(15) NOT NULL,
        PRIMARY KEY (`sid`,`phone`),
        KEY `supplierc_idx` (`sid`),
        CONSTRAINT `supplier_phone_fkey` FOREIGN KEY (`sid`) REFERENCES `supplier` (`sid`)
       );
       ]]>
    </query>

    <query id="create_supplier_email_table">
        <![CDATA[
        CREATE TABLE `supplier_contact` (
        `sid` int(11) NOT NULL,
        `email` varchar(320) NOT NULL,
        PRIMARY KEY (`sid`,`phone`),
        KEY `suppliers_idx` (`sid`),
        CONSTRAINT `supplier_email_fkey` FOREIGN KEY (`sid`) REFERENCES `supplier` (`sid`)
        );
       ]]>
    </query>

    <!-- Select suppliers -->
    <query id="get_suppliers">
        <![CDATA[
           SELECT s.pid , s.name , s.address ,  c.name as cname
           FROM supplier as s ,  categories as c,
           WHERE  s.category = c.cid
        ]]>
    </query>
    <!-- Select a particular Supplier by id Query -->
    <query id="supplier_by_id">
        <![CDATA[
            select * from supplier where sid = ?
        ]]>
    </query>


</Queries>
